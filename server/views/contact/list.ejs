<%- include ('../partials/header.ejs'); %>

<%- include ('../partials/main_nav.ejs'); %>

<!--
  Name: Juliano Souza Chaves Costa
  StudentID: 301222713
  Date: 2022-10-29
-->

    <main class="container d-flex flex-column p-3 ">
        <div class="row position-relative align-items-center">
            <div class="col-md-offset-3 col-md-6 text-center mx-auto">
                <h1>
                    <%= title %>
                </h1>
                <table class="table table-responsive table-bordered-table-striped-hover">
                    <tr class="d-flex">
                        <th class="text-center col-2">First Name</th>
                        <th class="text-center col-2">Last Name</th>
                        <th class="text-center col-2">Phone</th>
                        <th class="text-center col-2">Email</th>
                        <th class="text-center col-5">Message</th>
                        <th class="text-center col-2"></th>
                        <th class="text-center col-2"></th>
                    </tr>

                    <!-- Sort contact list alphabeticaly by first name then last name -->
                    <% ContactList.sort(function (a, b) { return a.fname.localeCompare(b.fname) || a.lname.localeCompare(b.lname); }); %> 

                    <% for(let count=0; count < ContactList.length; count++){ %>
                        <tr class="d-flex">
                            <td class="text-center col-2">
                                <%= ContactList[count].fname %>
                            </td>
                            <td class="text-center col-2">
                                <%= ContactList[count].lname %>
                            </td>
                            <td class="text-center col-2">
                                <%= ContactList[count].phone %>
                            </td>
                            <td class="text-center col-2">
                                <%= ContactList[count].email %>
                            </td>
                            <td class="text-center col-5">
                                <%= ContactList[count].message %>
                            </td>
                            <!-- Edit button -->
                            <td class="text-center col-2"> <a href="/contact-list/edit/<%= ContactList[count]._id %>"
                                    class="btn btn-primary">Edit</a> </td>
                            <!-- Delete button -->
                            <td class="text-center col-2"> <a
                                    href="/contact-list/delete/<%= ContactList[count]._id %>"
                                    class="btn btn-danger">Delete</a> </td>
                        </tr>
                    <% } %>
                </table>
            </div>
        </div>
    </main>


<%- include ('../partials/bottom_nav'); %>

<%- include ('../partials/footer.ejs'); %>